DROP DATABASE IF EXISTS Fertilizer_Management;
CREATE DATABASE Fertilizer_Management;
USE Fertilizer_Management;

CREATE TABLE FARMER(
	FarmerID CHAR(4) NOT NULL,
	FName VARCHAR(20) NOT NULL,
	LName VARCHAR(20) NOT NULL,
	Address VARCHAR(200) NOT NULL,
	TelNo CHAR(10) NOT NULL,
	NIC VARCHAR(12) NOT NULL,
	PRIMARY KEY(FarmerID)
);

CREATE TABLE SUPPLY_CENTER(
	CenterID CHAR(4) NOT NULL,
	Division VARCHAR(30) NOT NULL,
	PRIMARY KEY(CenterID)
);

CREATE TABLE AGRICULTURAL_OFFICER(
	OfficerID CHAR(4) NOT NULL,
	CenterID CHAR(4) NOT NULL,
	FName VARCHAR(20) NOT NULL,
	LName VARCHAR(20) NOT NULL,
	TelNo CHAR(10) NOT NULL,
	Password VARCHAR(40) NOT NULL,
	PRIMARY KEY(OfficerID),
	FOREIGN KEY (CenterID) REFERENCES SUPPLY_CENTER(CenterID)
	ON DELETE CASCADE ON UPDATE CASCADE	
);

CREATE TABLE CULTIVATION(
	LandID CHAR(4) NOT NULL,
	FarmerID CHAR(4) NOT NULL,
	OfficerID CHAR(4) NOT NULL,
	CropName VARCHAR(30) NOT NULL,
	LandArea DECIMAL(8,3) NOT NULL,
	Month VARCHAR(20) NOT NULL,
	PRIMARY KEY(LandID),
	FOREIGN KEY (FarmerID) REFERENCES FARMER(FarmerID)
	ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (OfficerID) REFERENCES AGRICULTURAL_OFFICER(OfficerID)
	ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE FERTILIZER(
	FertilizerID CHAR(4) NOT NULL,
	Description VARCHAR(30) NOT NULL,
	PRIMARY KEY(FertilizerID)
);

CREATE TABLE RECEIVES(
	LandID CHAR(4) NOT NULL,
	FertilizerID CHAR(4) NOT NULL,
	IssueDate DATE,
	Amount DECIMAL(8,3) NOT NULL,
	FOREIGN KEY (LandID) REFERENCES CULTIVATION(LandID)
	ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (FertilizerID) REFERENCES FERTILIZER(FertilizerID)
	ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE STORES(
	FertilizerID CHAR(4) NOT NULL,
	CenterID CHAR(4) NOT NULL,
	QtyOnHand DECIMAL(8,3) NOT NULL,
	StoredDate DATE,	
	ExpireDate DATE,
	FOREIGN KEY (FertilizerID) REFERENCES FERTILIZER(FertilizerID)
	ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY (CenterID) REFERENCES SUPPLY_CENTER(CenterID)
	ON DELETE CASCADE ON UPDATE CASCADE
);



INSERT INTO FARMER VALUES('F001','Saman','Danapala','No.20,DJ Halli,Sira', '9897159594', '962291465V');
INSERT INTO FARMER VALUES('F002','Nimal','Gunapala','No. 200,Goli,Guntur','9897155689', '875612458V');
INSERT INTO FARMER VALUES('F003','Mohan','Kumar','No. 100,Minalur,Thrissur','9548159594', '625645789V');
INSERT INTO FARMER VALUES('F004','Prasanna','Iyer','No. 10,Kolathur,Salem','9454647422', '123456789456');
INSERT INTO FARMER VALUES('F005','Sanjeewa','Reddy','N0. 34,Bhotna,Sangrur','8698801234', '784596154V');


INSERT INTO SUPPLY_CENTER VALUES
('SC01','Aluthgama South'),
('SC02','Panadura'),
('SC03','Wadduwa North'),
('SC04','Galle Baddegama'),
('SC05','Galle Neluwa');


INSERT INTO AGRICULTURAL_OFFICER VALUES('A001','SC01','Sharath','Belunike','9122584781', 'abcdefg');
INSERT INTO AGRICULTURAL_OFFICER VALUES('A002','SC02','Kumara','Chatterjee','9004455698','123xyz');
INSERT INTO AGRICULTURAL_OFFICER VALUES('A003','SC01','Ramani','Karunarathne','9577586145', '#170#');


INSERT INTO CULTIVATION VALUES('LN01','F001','A002','Green Chilli',2.56,'January');
INSERT INTO CULTIVATION VALUES('LN12','F002','A003','Paddy',4.25,'March');
INSERT INTO CULTIVATION VALUES('LN23','F002','A003','Maize',5.50,'Februar');
INSERT INTO CULTIVATION VALUES('LN34','F003','A002','Paddy',1.85,'March');
INSERT INTO CULTIVATION VALUES('LN45','F001','A001','Brinjal',4.80,'January');
INSERT INTO CULTIVATION VALUES('LN56','F005','A001','Tomato',3.25,'January');
INSERT INTO CULTIVATION VALUES('LN67','F005','A001','Green Chilli',0.95,'January');
INSERT INTO CULTIVATION VALUES('LN78','F002','A001','Paddy',3.25,'April');
INSERT INTO CULTIVATION VALUES('LN89','F003','A001','Maize',2.30,'February');
INSERT INTO CULTIVATION VALUES('LN10','F004','A001','Tomato',1.20,'January');

INSERT INTO FERTILIZER VALUES('FR01','Urea');
INSERT INTO FERTILIZER VALUES('FR02','Sulphate of Ammonia');
INSERT INTO FERTILIZER VALUES('FR03','Sodium Nitrate');
INSERT INTO FERTILIZER VALUES('FR04','Triple Superphosphate');
INSERT INTO FERTILIZER VALUES('FR05','Ammonium Phosphate');
INSERT INTO FERTILIZER VALUES('FR06','Eppawala Rock Phosphate');
INSERT INTO FERTILIZER VALUES('FR07','Muriate of Potash');
INSERT INTO FERTILIZER VALUES('FR08','Dolamite');


INSERT INTO STORES VALUES('FR01','SC01',75,'2022-01-07','2024-01-07');
INSERT INTO STORES VALUES('FR02','SC01',60,'2023-03-20','2024-03-20');
INSERT INTO STORES VALUES('FR03','SC01',40,'2019-09-02','2022-09-02');
INSERT INTO STORES VALUES('FR04','SC01',30,'2017-11-17','2020-05-17');
INSERT INTO STORES VALUES('FR08','SC01',100,'2020-02-09','2023-02-09');
INSERT INTO STORES VALUES('FR01','SC02',120,'2022-01-07','2024-01-07');
INSERT INTO STORES VALUES('FR06','SC02',65,'2023-01-07','2025-07-07');
INSERT INTO STORES VALUES('FR08','SC02',50,'2022-01-07','2024-01-07');
INSERT INTO STORES VALUES('FR02','SC02',80,'2023-01-07','2024-01-07');
INSERT INTO STORES VALUES('FR07','SC02',95,'2022-01-07','2023-07-07');


INSERT INTO RECEIVES VALUES('LN01','FR01','2022-01-20',5);
INSERT INTO RECEIVES VALUES('LN01','FR04','2022-01-03',3);
INSERT INTO RECEIVES VALUES('LN12','FR07','2022-03-02',5);
INSERT INTO RECEIVES VALUES('LN23','FR01','2022-02-15',2.5);
INSERT INTO RECEIVES VALUES('LN67','FR06','2023-02-15',1.5);
INSERT INTO RECEIVES VALUES('LN34','FR04','2018-04-05',5);
INSERT INTO RECEIVES VALUES('LN56','FR08','2022-01-30',2);
